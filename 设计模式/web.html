<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTPS | 嗯哼人生</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/m/assets/css/0.styles.1e386fb6.css" as="style"><link rel="preload" href="/m/assets/js/app.71fdaff2.js" as="script"><link rel="preload" href="/m/assets/js/2.351ead77.js" as="script"><link rel="preload" href="/m/assets/js/29.f40ac6f5.js" as="script"><link rel="prefetch" href="/m/assets/js/10.98c1e7e0.js"><link rel="prefetch" href="/m/assets/js/100.d7774ae1.js"><link rel="prefetch" href="/m/assets/js/101.0d4dea0d.js"><link rel="prefetch" href="/m/assets/js/102.6867f859.js"><link rel="prefetch" href="/m/assets/js/103.9d24bd08.js"><link rel="prefetch" href="/m/assets/js/104.4d59f256.js"><link rel="prefetch" href="/m/assets/js/105.ff49af8e.js"><link rel="prefetch" href="/m/assets/js/106.b26c7611.js"><link rel="prefetch" href="/m/assets/js/107.da5be320.js"><link rel="prefetch" href="/m/assets/js/108.0c03f842.js"><link rel="prefetch" href="/m/assets/js/109.5587de24.js"><link rel="prefetch" href="/m/assets/js/11.4e6d88d4.js"><link rel="prefetch" href="/m/assets/js/110.40ae6022.js"><link rel="prefetch" href="/m/assets/js/111.0353ccf3.js"><link rel="prefetch" href="/m/assets/js/112.f562c096.js"><link rel="prefetch" href="/m/assets/js/113.7926c003.js"><link rel="prefetch" href="/m/assets/js/114.356035f0.js"><link rel="prefetch" href="/m/assets/js/115.15e5e23e.js"><link rel="prefetch" href="/m/assets/js/116.2db2b1ed.js"><link rel="prefetch" href="/m/assets/js/117.2658e42c.js"><link rel="prefetch" href="/m/assets/js/118.037a8503.js"><link rel="prefetch" href="/m/assets/js/119.21153540.js"><link rel="prefetch" href="/m/assets/js/12.c3dadd73.js"><link rel="prefetch" href="/m/assets/js/120.b8f0644f.js"><link rel="prefetch" href="/m/assets/js/121.4c1c263a.js"><link rel="prefetch" href="/m/assets/js/122.d6ba18dd.js"><link rel="prefetch" href="/m/assets/js/123.ceef4883.js"><link rel="prefetch" href="/m/assets/js/124.9e5f50ca.js"><link rel="prefetch" href="/m/assets/js/125.de1ddc80.js"><link rel="prefetch" href="/m/assets/js/126.ae350aea.js"><link rel="prefetch" href="/m/assets/js/127.4636f6be.js"><link rel="prefetch" href="/m/assets/js/128.13b379ab.js"><link rel="prefetch" href="/m/assets/js/129.e7b0a15f.js"><link rel="prefetch" href="/m/assets/js/13.a52bd89b.js"><link rel="prefetch" href="/m/assets/js/130.147cdf11.js"><link rel="prefetch" href="/m/assets/js/131.c7a07871.js"><link rel="prefetch" href="/m/assets/js/132.faf72eb9.js"><link rel="prefetch" href="/m/assets/js/133.6301923b.js"><link rel="prefetch" href="/m/assets/js/134.4357c6e4.js"><link rel="prefetch" href="/m/assets/js/135.0ea43a3d.js"><link rel="prefetch" href="/m/assets/js/136.5a7c2377.js"><link rel="prefetch" href="/m/assets/js/137.393c998e.js"><link rel="prefetch" href="/m/assets/js/138.dcf958b6.js"><link rel="prefetch" href="/m/assets/js/139.1ccac68b.js"><link rel="prefetch" href="/m/assets/js/14.96fff293.js"><link rel="prefetch" href="/m/assets/js/140.938c314e.js"><link rel="prefetch" href="/m/assets/js/141.03cc2137.js"><link rel="prefetch" href="/m/assets/js/142.db00aba9.js"><link rel="prefetch" href="/m/assets/js/143.6d7b22af.js"><link rel="prefetch" href="/m/assets/js/144.850ed5a9.js"><link rel="prefetch" href="/m/assets/js/145.a1958a5f.js"><link rel="prefetch" href="/m/assets/js/146.1b350d4f.js"><link rel="prefetch" href="/m/assets/js/147.961f3ccd.js"><link rel="prefetch" href="/m/assets/js/148.cb4f8811.js"><link rel="prefetch" href="/m/assets/js/149.45ad7c2c.js"><link rel="prefetch" href="/m/assets/js/15.c507965f.js"><link rel="prefetch" href="/m/assets/js/150.5d952b70.js"><link rel="prefetch" href="/m/assets/js/151.5c794bb0.js"><link rel="prefetch" href="/m/assets/js/152.974e657e.js"><link rel="prefetch" href="/m/assets/js/153.b7cf98f6.js"><link rel="prefetch" href="/m/assets/js/154.be904394.js"><link rel="prefetch" href="/m/assets/js/155.769e3b0d.js"><link rel="prefetch" href="/m/assets/js/156.6107a44f.js"><link rel="prefetch" href="/m/assets/js/157.0bf74a2b.js"><link rel="prefetch" href="/m/assets/js/158.d499f907.js"><link rel="prefetch" href="/m/assets/js/159.6b2acd2c.js"><link rel="prefetch" href="/m/assets/js/16.247520d0.js"><link rel="prefetch" href="/m/assets/js/160.ec909209.js"><link rel="prefetch" href="/m/assets/js/161.4832768d.js"><link rel="prefetch" href="/m/assets/js/162.ae74834a.js"><link rel="prefetch" href="/m/assets/js/163.8af51be9.js"><link rel="prefetch" href="/m/assets/js/164.0d64a1ef.js"><link rel="prefetch" href="/m/assets/js/165.5e5a775c.js"><link rel="prefetch" href="/m/assets/js/166.121987f8.js"><link rel="prefetch" href="/m/assets/js/167.1c270942.js"><link rel="prefetch" href="/m/assets/js/168.200df8c8.js"><link rel="prefetch" href="/m/assets/js/169.84f5e0d7.js"><link rel="prefetch" href="/m/assets/js/17.3cb462b5.js"><link rel="prefetch" href="/m/assets/js/170.57b7eec5.js"><link rel="prefetch" href="/m/assets/js/171.d993d636.js"><link rel="prefetch" href="/m/assets/js/172.820d00a1.js"><link rel="prefetch" href="/m/assets/js/173.cc29ff6e.js"><link rel="prefetch" href="/m/assets/js/174.99d62af7.js"><link rel="prefetch" href="/m/assets/js/175.da874148.js"><link rel="prefetch" href="/m/assets/js/176.d0755bfc.js"><link rel="prefetch" href="/m/assets/js/177.8b00d874.js"><link rel="prefetch" href="/m/assets/js/178.2b0cfda8.js"><link rel="prefetch" href="/m/assets/js/179.780a3873.js"><link rel="prefetch" href="/m/assets/js/18.298da910.js"><link rel="prefetch" href="/m/assets/js/180.7c0ac3dc.js"><link rel="prefetch" href="/m/assets/js/181.507f9073.js"><link rel="prefetch" href="/m/assets/js/182.87f76d4a.js"><link rel="prefetch" href="/m/assets/js/183.1410502e.js"><link rel="prefetch" href="/m/assets/js/184.80666cb3.js"><link rel="prefetch" href="/m/assets/js/185.dc628b97.js"><link rel="prefetch" href="/m/assets/js/186.c2560a3f.js"><link rel="prefetch" href="/m/assets/js/187.6af43ea3.js"><link rel="prefetch" href="/m/assets/js/188.da75b50c.js"><link rel="prefetch" href="/m/assets/js/189.78dd960b.js"><link rel="prefetch" href="/m/assets/js/19.d9eabdf8.js"><link rel="prefetch" href="/m/assets/js/190.017586b9.js"><link rel="prefetch" href="/m/assets/js/191.5fa65eb7.js"><link rel="prefetch" href="/m/assets/js/192.5bb628c7.js"><link rel="prefetch" href="/m/assets/js/193.35707c80.js"><link rel="prefetch" href="/m/assets/js/194.35c3b13b.js"><link rel="prefetch" href="/m/assets/js/195.6dc8874b.js"><link rel="prefetch" href="/m/assets/js/196.01a1e825.js"><link rel="prefetch" href="/m/assets/js/197.5745084a.js"><link rel="prefetch" href="/m/assets/js/198.0455ca12.js"><link rel="prefetch" href="/m/assets/js/199.75129c13.js"><link rel="prefetch" href="/m/assets/js/20.ce14ddb9.js"><link rel="prefetch" href="/m/assets/js/200.a08681d0.js"><link rel="prefetch" href="/m/assets/js/201.a54018b7.js"><link rel="prefetch" href="/m/assets/js/202.2361e839.js"><link rel="prefetch" href="/m/assets/js/203.b92491ee.js"><link rel="prefetch" href="/m/assets/js/204.13742571.js"><link rel="prefetch" href="/m/assets/js/205.b066e447.js"><link rel="prefetch" href="/m/assets/js/206.e2c72f2c.js"><link rel="prefetch" href="/m/assets/js/207.09a83a9a.js"><link rel="prefetch" href="/m/assets/js/208.f4b8d71c.js"><link rel="prefetch" href="/m/assets/js/209.1a4e4d18.js"><link rel="prefetch" href="/m/assets/js/21.0dc0e0bf.js"><link rel="prefetch" href="/m/assets/js/210.9709d46f.js"><link rel="prefetch" href="/m/assets/js/211.3704916b.js"><link rel="prefetch" href="/m/assets/js/212.7c96c99f.js"><link rel="prefetch" href="/m/assets/js/213.b4aedaa1.js"><link rel="prefetch" href="/m/assets/js/214.d0b2586b.js"><link rel="prefetch" href="/m/assets/js/215.2268650a.js"><link rel="prefetch" href="/m/assets/js/216.dcaa6f2f.js"><link rel="prefetch" href="/m/assets/js/217.33aaf649.js"><link rel="prefetch" href="/m/assets/js/218.216d8592.js"><link rel="prefetch" href="/m/assets/js/219.44d35873.js"><link rel="prefetch" href="/m/assets/js/22.ce355d8a.js"><link rel="prefetch" href="/m/assets/js/220.ff06fa11.js"><link rel="prefetch" href="/m/assets/js/221.93379b76.js"><link rel="prefetch" href="/m/assets/js/222.6f0bbeea.js"><link rel="prefetch" href="/m/assets/js/223.4c5e29f0.js"><link rel="prefetch" href="/m/assets/js/224.e7be32e4.js"><link rel="prefetch" href="/m/assets/js/225.4915db8f.js"><link rel="prefetch" href="/m/assets/js/226.60f21d11.js"><link rel="prefetch" href="/m/assets/js/227.0e63cf34.js"><link rel="prefetch" href="/m/assets/js/228.e7b7a543.js"><link rel="prefetch" href="/m/assets/js/229.73bf392a.js"><link rel="prefetch" href="/m/assets/js/23.40c917ac.js"><link rel="prefetch" href="/m/assets/js/230.9f789c55.js"><link rel="prefetch" href="/m/assets/js/231.8fd85bc2.js"><link rel="prefetch" href="/m/assets/js/232.e6c4a62c.js"><link rel="prefetch" href="/m/assets/js/233.45636bf3.js"><link rel="prefetch" href="/m/assets/js/234.5194ce16.js"><link rel="prefetch" href="/m/assets/js/235.15ba019b.js"><link rel="prefetch" href="/m/assets/js/236.ac5768c1.js"><link rel="prefetch" href="/m/assets/js/237.91ec2e5a.js"><link rel="prefetch" href="/m/assets/js/238.af630344.js"><link rel="prefetch" href="/m/assets/js/239.b2b84093.js"><link rel="prefetch" href="/m/assets/js/24.5b681006.js"><link rel="prefetch" href="/m/assets/js/240.9c9b1fba.js"><link rel="prefetch" href="/m/assets/js/241.c26c2147.js"><link rel="prefetch" href="/m/assets/js/242.ce44f37f.js"><link rel="prefetch" href="/m/assets/js/243.aa04b829.js"><link rel="prefetch" href="/m/assets/js/244.ee4c9090.js"><link rel="prefetch" href="/m/assets/js/245.62ebda1d.js"><link rel="prefetch" href="/m/assets/js/246.2fd9ce22.js"><link rel="prefetch" href="/m/assets/js/247.52b3e746.js"><link rel="prefetch" href="/m/assets/js/248.2e432a32.js"><link rel="prefetch" href="/m/assets/js/249.4598fccb.js"><link rel="prefetch" href="/m/assets/js/25.d5d6ba55.js"><link rel="prefetch" href="/m/assets/js/250.7c93bc3e.js"><link rel="prefetch" href="/m/assets/js/251.4d402930.js"><link rel="prefetch" href="/m/assets/js/252.1b3fb775.js"><link rel="prefetch" href="/m/assets/js/253.01a9b4f8.js"><link rel="prefetch" href="/m/assets/js/254.29de4256.js"><link rel="prefetch" href="/m/assets/js/255.4911ce12.js"><link rel="prefetch" href="/m/assets/js/256.0a40f8d2.js"><link rel="prefetch" href="/m/assets/js/257.2111ae5e.js"><link rel="prefetch" href="/m/assets/js/258.0e9b2cd1.js"><link rel="prefetch" href="/m/assets/js/259.43158d35.js"><link rel="prefetch" href="/m/assets/js/26.b1e00e8a.js"><link rel="prefetch" href="/m/assets/js/260.72ea8c45.js"><link rel="prefetch" href="/m/assets/js/261.3f679643.js"><link rel="prefetch" href="/m/assets/js/262.d9ecaed6.js"><link rel="prefetch" href="/m/assets/js/27.556976c4.js"><link rel="prefetch" href="/m/assets/js/28.11027d56.js"><link rel="prefetch" href="/m/assets/js/3.a2a1a8e5.js"><link rel="prefetch" href="/m/assets/js/30.3b59bb10.js"><link rel="prefetch" href="/m/assets/js/31.c37142be.js"><link rel="prefetch" href="/m/assets/js/32.c5e0d2a0.js"><link rel="prefetch" href="/m/assets/js/33.4f5f3a8d.js"><link rel="prefetch" href="/m/assets/js/34.4a3a9398.js"><link rel="prefetch" href="/m/assets/js/35.77f89f97.js"><link rel="prefetch" href="/m/assets/js/36.6ea00d3c.js"><link rel="prefetch" href="/m/assets/js/37.b5a3b5b4.js"><link rel="prefetch" href="/m/assets/js/38.24b26621.js"><link rel="prefetch" href="/m/assets/js/39.ab372876.js"><link rel="prefetch" href="/m/assets/js/4.b9f14f77.js"><link rel="prefetch" href="/m/assets/js/40.7a81caac.js"><link rel="prefetch" href="/m/assets/js/41.d23cf8c8.js"><link rel="prefetch" href="/m/assets/js/42.ef938986.js"><link rel="prefetch" href="/m/assets/js/43.708a3cf3.js"><link rel="prefetch" href="/m/assets/js/44.f705f7de.js"><link rel="prefetch" href="/m/assets/js/45.0e6afdb6.js"><link rel="prefetch" href="/m/assets/js/46.9815c7cc.js"><link rel="prefetch" href="/m/assets/js/47.5d1c1dcc.js"><link rel="prefetch" href="/m/assets/js/48.d9d571a6.js"><link rel="prefetch" href="/m/assets/js/49.9cbaa1e9.js"><link rel="prefetch" href="/m/assets/js/5.57dbdc35.js"><link rel="prefetch" href="/m/assets/js/50.265f94f4.js"><link rel="prefetch" href="/m/assets/js/51.094b2e7f.js"><link rel="prefetch" href="/m/assets/js/52.8b7101c0.js"><link rel="prefetch" href="/m/assets/js/53.98f3fc0b.js"><link rel="prefetch" href="/m/assets/js/54.b3d830fd.js"><link rel="prefetch" href="/m/assets/js/55.fb9cd8c7.js"><link rel="prefetch" href="/m/assets/js/56.878cf94b.js"><link rel="prefetch" href="/m/assets/js/57.1c819831.js"><link rel="prefetch" href="/m/assets/js/58.ac3faf70.js"><link rel="prefetch" href="/m/assets/js/59.b0483bf9.js"><link rel="prefetch" href="/m/assets/js/6.a0c51186.js"><link rel="prefetch" href="/m/assets/js/60.48c301e6.js"><link rel="prefetch" href="/m/assets/js/61.4bf4f2e7.js"><link rel="prefetch" href="/m/assets/js/62.d927584b.js"><link rel="prefetch" href="/m/assets/js/63.b72a48f3.js"><link rel="prefetch" href="/m/assets/js/64.6923d7c8.js"><link rel="prefetch" href="/m/assets/js/65.042fc335.js"><link rel="prefetch" href="/m/assets/js/66.1afdb278.js"><link rel="prefetch" href="/m/assets/js/67.04f7b0c7.js"><link rel="prefetch" href="/m/assets/js/68.97789db4.js"><link rel="prefetch" href="/m/assets/js/69.d914e9f8.js"><link rel="prefetch" href="/m/assets/js/7.aef5e50f.js"><link rel="prefetch" href="/m/assets/js/70.84845956.js"><link rel="prefetch" href="/m/assets/js/71.d6e9132a.js"><link rel="prefetch" href="/m/assets/js/72.2c1f5783.js"><link rel="prefetch" href="/m/assets/js/73.789e9372.js"><link rel="prefetch" href="/m/assets/js/74.e79f4842.js"><link rel="prefetch" href="/m/assets/js/75.4a389066.js"><link rel="prefetch" href="/m/assets/js/76.f5721f28.js"><link rel="prefetch" href="/m/assets/js/77.e6ce992d.js"><link rel="prefetch" href="/m/assets/js/78.5c31237a.js"><link rel="prefetch" href="/m/assets/js/79.6a4f09e0.js"><link rel="prefetch" href="/m/assets/js/8.aac4a85a.js"><link rel="prefetch" href="/m/assets/js/80.23b925ca.js"><link rel="prefetch" href="/m/assets/js/81.bc8138cb.js"><link rel="prefetch" href="/m/assets/js/82.4783bc83.js"><link rel="prefetch" href="/m/assets/js/83.1be8f057.js"><link rel="prefetch" href="/m/assets/js/84.3132660e.js"><link rel="prefetch" href="/m/assets/js/85.95c5ab8b.js"><link rel="prefetch" href="/m/assets/js/86.17c9a201.js"><link rel="prefetch" href="/m/assets/js/87.daa0da6b.js"><link rel="prefetch" href="/m/assets/js/88.9409cacc.js"><link rel="prefetch" href="/m/assets/js/89.bf04eaa0.js"><link rel="prefetch" href="/m/assets/js/9.0dd0ff11.js"><link rel="prefetch" href="/m/assets/js/90.5e1e2630.js"><link rel="prefetch" href="/m/assets/js/91.6466b581.js"><link rel="prefetch" href="/m/assets/js/92.0dd7ffc6.js"><link rel="prefetch" href="/m/assets/js/93.045047c7.js"><link rel="prefetch" href="/m/assets/js/94.ce06dedb.js"><link rel="prefetch" href="/m/assets/js/95.f673ef28.js"><link rel="prefetch" href="/m/assets/js/96.1f73d13d.js"><link rel="prefetch" href="/m/assets/js/97.b1800fdc.js"><link rel="prefetch" href="/m/assets/js/98.245eb5e4.js"><link rel="prefetch" href="/m/assets/js/99.2cfc78a1.js">
    <link rel="stylesheet" href="/m/assets/css/0.styles.1e386fb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/m/" class="home-link router-link-active"><!----> <span class="site-name">嗯哼人生</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/m/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://cn100800.tk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="mailto:freecracy1024@gmail.com" class="nav-link external">
  mail
  <!----></a></div><div class="nav-item"><a href="https://google.com.hk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  google
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/m/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://cn100800.tk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="mailto:freecracy1024@gmail.com" class="nav-link external">
  mail
  <!----></a></div><div class="nav-item"><a href="https://google.com.hk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  google
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go语言之旅</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deno</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>周末闲谈</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度好文</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>漫步 Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>设计模式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/m/设计模式/分库分表.html" class="sidebar-link">分库分表</a></li><li><a href="/m/设计模式/ES.html" class="sidebar-link">ES</a></li><li><a href="/m/设计模式/多账号登录.html" class="sidebar-link">多账户统一登录</a></li><li><a href="/m/设计模式/IM.html" class="sidebar-link">IM即时通信</a></li><li><a href="/m/设计模式/GraphQL.html" class="sidebar-link">GraphQL</a></li><li><a href="/m/设计模式/常用命令.html" class="sidebar-link">常用命令</a></li><li><a href="/m/设计模式/OAuth2.html" class="sidebar-link">OAuth2.0</a></li><li><a href="/m/设计模式/IO模型.html" class="sidebar-link">IO模型</a></li><li><a href="/m/设计模式/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/m/设计模式/搜索引擎.html" class="sidebar-link">搜索引擎</a></li><li><a href="/m/设计模式/feed流.html" class="sidebar-link">feed流</a></li><li><a href="/m/设计模式/PHP.html" class="sidebar-link">PHP</a></li><li><a href="/m/设计模式/Rust.html" class="sidebar-link">Rust</a></li><li><a href="/m/设计模式/WebSocket.html" class="sidebar-link">Websocket</a></li><li><a href="/m/设计模式/注册中心.html" class="sidebar-link">注册中心</a></li><li><a href="/m/设计模式/web.html" class="active sidebar-link">HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#常见错误码" class="sidebar-link">常见错误码</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#常见请求头" class="sidebar-link">常见请求头</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#浏览器存储" class="sidebar-link">浏览器存储</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#crsf" class="sidebar-link">CRSF</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#xss" class="sidebar-link">XSS</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#服务端攻击" class="sidebar-link">服务端攻击</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#localstorage-sessionstorage" class="sidebar-link">localstorage &amp; sessionstorage</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#header-头注意事项" class="sidebar-link">header 头注意事项</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#引用层" class="sidebar-link">引用层</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#http3-quic" class="sidebar-link">HTTP3(QUIC)</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#time-wait" class="sidebar-link">time_wait</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#close-wait" class="sidebar-link">close_wait</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#tcp-保护" class="sidebar-link">tcp 保护</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#http3" class="sidebar-link">http3</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#网络" class="sidebar-link">网络</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#keepalive" class="sidebar-link">keepalive</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#tcp-调优" class="sidebar-link">tcp 调优</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#time-wait-2" class="sidebar-link">time_wait</a></li><li class="sidebar-sub-header"><a href="/m/设计模式/web.html#_0-0-0-0" class="sidebar-link">0.0.0.0</a></li></ul></li><li><a href="/m/设计模式/k8s.html" class="sidebar-link">k8s</a></li><li><a href="/m/设计模式/vue.html" class="sidebar-link">vue</a></li><li><a href="/m/设计模式/lua.html" class="sidebar-link">lua</a></li><li><a href="/m/设计模式/leader.html" class="sidebar-link">leader</a></li><li><a href="/m/设计模式/热门搜索字符串.html" class="sidebar-link">热门搜索字符串</a></li><li><a href="/m/设计模式/延时消息.html" class="sidebar-link">延时消息</a></li><li><a href="/m/设计模式/分布式事务.html" class="sidebar-link">分布式事务</a></li><li><a href="/m/设计模式/再谈架构.html" class="sidebar-link">再谈架构</a></li><li><a href="/m/设计模式/日志监控.html" class="sidebar-link">日志监控</a></li><li><a href="/m/设计模式/权限系统.html" class="sidebar-link">权限系统</a></li><li><a href="/m/设计模式/消息队列.html" class="sidebar-link">消息队列</a></li><li><a href="/m/设计模式/点赞签到.html" class="sidebar-link">点赞签到</a></li><li><a href="/m/设计模式/用户排名.html" class="sidebar-link">用户排名</a></li><li><a href="/m/设计模式/电商系统.html" class="sidebar-link">电商系统</a></li><li><a href="/m/设计模式/直播.html" class="sidebar-link">直播</a></li><li><a href="/m/设计模式/秒杀抢购.html" class="sidebar-link">秒杀抢购</a></li><li><a href="/m/设计模式/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/m/设计模式/通用型系统设计.html" class="sidebar-link">通用型系统设计</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>鸡汤软文</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h1> <h2 id="常见错误码"><a href="#常见错误码" class="header-anchor">#</a> 常见错误码</h2> <table><thead><tr><th>错误码</th> <th>描述</th> <th>说明</th></tr></thead> <tbody><tr><td>101</td> <td>Switching Protocols</td> <td>升级 websocket ,服务器同意变更返回 101</td></tr> <tr><td>206</td> <td>Partial Content</td> <td>range 请求正常返回 206</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>权限禁止</td></tr> <tr><td>405</td> <td>Method Not Allowed</td> <td>请求方法不被允许</td></tr> <tr><td>416</td> <td>Requested Range Not Satisfiable</td> <td>请求范围不合法,如范围越界</td></tr> <tr><td>304</td> <td></td> <td>文件未修改</td></tr></tbody></table> <h2 id="常见请求头"><a href="#常见请求头" class="header-anchor">#</a> 常见请求头</h2> <h3 id="通用表头"><a href="#通用表头" class="header-anchor">#</a> 通用表头</h3> <h3 id="请求头"><a href="#请求头" class="header-anchor">#</a> 请求头</h3> <h3 id="响应头"><a href="#响应头" class="header-anchor">#</a> 响应头</h3> <h3 id="post-常用格式"><a href="#post-常用格式" class="header-anchor">#</a> post 常用格式</h3> <h2 id="浏览器存储"><a href="#浏览器存储" class="header-anchor">#</a> 浏览器存储</h2> <table><thead><tr><th>类型</th> <th>作用范围</th></tr></thead> <tbody><tr><td>cookie</td> <td>约 4k,根据过期时间删除数据</td></tr> <tr><td>localstorage</td> <td>约 4M,长时间保存,只能主动删除</td></tr> <tr><td>sessionstorage</td> <td>约 4M,窗口关闭自动删除</td></tr></tbody></table> <h3 id="http2"><a href="#http2" class="header-anchor">#</a> HTTP2</h3> <h3 id="二进制帧结构"><a href="#二进制帧结构" class="header-anchor">#</a> 二进制帧结构</h3> <p><img src="/m/assets/img/htts2zhenjiegou.124b3159.png" alt="htts2zhenjiegou"></p> <table><thead><tr><th>字段</th> <th>长度</th> <th>作用</th></tr></thead> <tbody><tr><td>length</td> <td>3 字节</td> <td>帧负载的长度</td></tr> <tr><td>type</td> <td>1 字节</td> <td>帧类型</td></tr> <tr><td>flags</td> <td>1 字节</td> <td>帧类型标识</td></tr> <tr><td>R</td> <td>1 位</td> <td>不要设置</td></tr> <tr><td>stream identifier</td> <td>31 位</td> <td>流 ID</td></tr> <tr><td>frame pay load</td> <td>可变长度</td> <td>帧内容</td></tr></tbody></table> <h2 id="crsf"><a href="#crsf" class="header-anchor">#</a> CRSF</h2> <h3 id="方式"><a href="#方式" class="header-anchor">#</a> 方式</h3> <h3 id="解决方法"><a href="#解决方法" class="header-anchor">#</a> 解决方法</h3> <ol><li>token 验证 : 服务端下发 token 给客户端,客户端提交表单时携带 token ,服务端对 token 校验,每一次请求都带上随机码,由正常用户保存,黑客不知道随机码就无法冒充用户访问了, 如果是接口将 token 放入 header</li> <li>隐藏 token : 将 1 中的 token 放 header 中</li> <li>Refer 验证</li> <li>验证码 : 恶意脚本不能识别复杂的验证码</li></ol> <h2 id="xss"><a href="#xss" class="header-anchor">#</a> XSS</h2> <p><img src="/m/assets/img/XSS.62a370af.png" alt="XSS"></p> <p>本质是将用户数据当成 HTML 代码一部分来执行,混淆原本语义,产生新的语义.所有与用户交互的地方都有可能存在 XSS 攻击.</p> <ol><li>配置 http 中 http-only 让前端不能操作 cookie</li> <li>输入检查,用户提交数据时使用 xssfilter 过滤不安全数据</li> <li>输出检查,页面渲染时过滤掉危险数据</li></ol> <h2 id="服务端攻击"><a href="#服务端攻击" class="header-anchor">#</a> 服务端攻击</h2> <h3 id="sql-注入"><a href="#sql-注入" class="header-anchor">#</a> sql 注入</h3> <p>sql 注入和 XSS 一样,都是违背数据和代码分离的原则导致的攻击方式.漏洞主要利用后端只是简单的拼接 sql 的方式查询数据.</p> <ol><li>sql 预编译, 参数绑定</li> <li>去人数据类型,非类型转换</li> <li>限制 sql 长度</li> <li>控制数据库权限</li> <li>避免直接响应 sql 异常, sql 发生异常时,自定义异常进行响应</li> <li>过滤参数中含有的数据库关键词</li></ol> <h2 id="localstorage-sessionstorage"><a href="#localstorage-sessionstorage" class="header-anchor">#</a> localstorage &amp; sessionstorage</h2> <p>sessionstorage : 不同标签数据不共享</p> <p>localstorage : 不同标签数据共享</p> <h2 id="header-头注意事项"><a href="#header-头注意事项" class="header-anchor">#</a> header 头注意事项</h2> <ol><li>不区分大小写,通常首字母大写</li> <li>字段名不允许有空格,可以使用<code>-</code>不能使用<code>_</code></li> <li>字段名必须紧接<code>:</code>不能有空格,但是<code>:</code>后面可以有空格</li> <li>字段名顺序没有意义</li></ol> <h2 id="引用层"><a href="#引用层" class="header-anchor">#</a> 引用层</h2> <p>应用层工作在用户态,传输层及以下工作在内核态.</p> <h2 id="http3-quic"><a href="#http3-quic" class="header-anchor">#</a> HTTP3(QUIC)</h2> <p>实现 tcp 可靠性,实现 TSL 层安全性</p> <h3 id="多路复用"><a href="#多路复用" class="header-anchor">#</a> 多路复用</h3> <p>tcp 存在队头阻塞问题,一个数据包没有按顺序到达,接收端会一直保持连接等待数据返回,就会阻塞后续请求 QUIC 在同一个物理连接上有多个独立逻辑数据流,并行在一个连接上传输,单个数据流可以保证有序,多个数据流无序互不影响.</p> <h3 id="连接迁移"><a href="#连接迁移" class="header-anchor">#</a> 连接迁移</h3> <p>tcp 连接的识别需要服务器和客户端 ip 和端口四个参数,如果网络切换,ip 会发生变化,导致之前的 tcp 失效需要重新建立连接.,QUIC 使用 uuid 标记每次连接,只要 uuid 不变就不需要握手,继续传输数据,</p> <h2 id="time-wait"><a href="#time-wait" class="header-anchor">#</a> time_wait</h2> <h3 id="原因"><a href="#原因" class="header-anchor">#</a> 原因</h3> <p>四次挥手时会等待 2ML 的,所以可能会发生大量 time_wait 的存在.</p> <h3 id="影响"><a href="#影响" class="header-anchor">#</a> 影响</h3> <ol><li>源端口数</li> <li>文件描述符数</li></ol> <h3 id="解决方法-2"><a href="#解决方法-2" class="header-anchor">#</a> 解决方法</h3> <p>修改网络配置,使用 socket 复用,即时释放资源</p> <ol><li>快速回收(recycle 内核 4.1 后被弃用)</li> <li>重复利用(reuse,前提是开启 tcp_timestamps)</li> <li>调大 time_wait 最大数量 (tcp_max_tw_buckets,默认 4096)</li></ol> <h2 id="close-wait"><a href="#close-wait" class="header-anchor">#</a> close_wait</h2> <h3 id="解决方法-3"><a href="#解决方法-3" class="header-anchor">#</a> 解决方法</h3> <ol><li>修改网络配置减少 close_wait 时间</li> <li>一般都是服务端代码问题</li></ol> <h2 id="tcp-保护"><a href="#tcp-保护" class="header-anchor">#</a> tcp 保护</h2> <p>定义一段时间,在这个时间内如果没有任何活动,tcp 保活机制开始作用,每隔一段时间发送一个探测报文,如果连续几个探测报文没有得到响应,则认为当前连接已死亡,系统内核将错误信息通知上层应用.在没有数据交互时通过保活机制确定对方连接是否存活.socket 接口设置 so_keeplive 选项开启保活机制.</p> <table><thead><tr><th>参数</th> <th>含义</th> <th>默认值</th></tr></thead> <tbody><tr><td>net.ipv4.tcp_keeplive_time</td> <td>如果 2 小时没有活动,启动保活机制</td> <td>7200s(2 小时)</td></tr> <tr><td>net.ipv4.tcp_keeplive_intvl</td> <td>每次检测间隔 75s</td> <td>75s</td></tr> <tr><td>net.ipv4.tcp_keeplive_probes</td> <td>检测 9 次无响应,认为对方不可达,中断本次连接</td> <td>9</td></tr> <tr><td>net.ipv4.tcp_retries2</td> <td>重传次数</td> <td>15</td></tr></tbody></table> <ol><li>如果正常工作,保活时间被重置</li> <li>如果主机宕机,存在保活机制,导致报文不可达,报告该连接已死亡</li> <li>如果主机宕机,服务端无法感知,没开启 keepalive 又没有数据交互,不武断 tcp 一直处于 established 状态,直到服务端进程重启</li> <li>如果进程崩溃,即时没有开启保活,双方没有数据交互,如果进程崩溃,这个过程操作系统时可以感知的,会发送 fin 报文给对方,断开连接</li> <li>如果有数据传输,客户端重启后会回复 rst 重置连接</li> <li>如果有数据传输,客户端一直不重启,会重传,在重传报文一直没有收到对方响应时,先到达最大重传次数,或者最大超时时间,其中一个条件就会停止重传</li></ol> <h2 id="http3"><a href="#http3" class="header-anchor">#</a> http3</h2> <h3 id="quic"><a href="#quic" class="header-anchor">#</a> quic</h3> <h2 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h2> <p>在传输层叫分段,在网络层叫分片,在 tcp 里长度是 MSS,在 ip 层这个长度是 MTU.</p> <p>MSS : tcp 层提交给 ip 层的最大分段大小,不包含 tcp header 和 tcp option,只包含 tcp playload,是用来限制应用层最大发送字节数.</p> <p>MSS = MTU - 20 (ip header) - 20 (tcp header)</p> <p>查看 MSS : tcp header 头中有该字段</p> <p>MSS 协商时取最小值.如果没有收到 MSS 字段,默认 536,即 536 + 20 + 20 = 576 是 ip 最小重组缓冲区的大小.</p> <p>MTU : 最大传输单元,由数据链路层提供,为了告诉上层 ip 层自己的传输能力是多大,ip 层就会根据它进行数据包切片.</p> <p>查看 MTU : ipconfig</p> <p>正常情况下 传输层做的分段, ip 层就不会分片了,如果传输层没有分段(UDP),ip 层就会分片.</p> <p>PMTU : 整个链路上最小 MTU,</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">cat</span> /proc/sys/net/ipv4/ip_no_pmtu_disc <span class="token comment"># 0 默认 0 开启 PMTU 发现功能</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果路由器收到大于当前 MTU 的分片时会查看 DF 的值,如果 0 允许分片,继续传递,如果是 1,就会把数据丢弃,同时返回一个 ICMP 包给发送端,数据不可达需要分片,同时带上当前机器的 MTU.</p> <h2 id="keepalive"><a href="#keepalive" class="header-anchor">#</a> keepalive</h2> <ol><li>http 的 keep-alive : 应用层,即用户态实现,称为 http 长连接,header 头 connection:keep-alive,避免浪费资源会设置 keepalive-timeout 参数,指定长连接超时时间,通过定时器来释放连接</li> <li>tcp 的 keepalive : tcp 层,内核态实现,称为 tcp 保活机制,没有数据时发送探测报文判断连接是否存活,需要 socket 接口设置 SO_KEEPALIVE 才能生效</li></ol> <h2 id="tcp-调优"><a href="#tcp-调优" class="header-anchor">#</a> tcp 调优</h2> <h3 id="三次握手"><a href="#三次握手" class="header-anchor">#</a> 三次握手</h3> <h4 id="客户端"><a href="#客户端" class="header-anchor">#</a> 客户端</h4> <table><thead><tr><th>参数</th> <th>含义</th> <th>默认</th></tr></thead> <tbody><tr><td>/proc/sys/net/ipv4/tcp_syn_resries</td> <td>syn 包重传次数(每次重传超时时间是上次 2 倍, 1, 2, 4, 8, 16),大概 1 分钟会终止握手</td> <td>5</td></tr></tbody></table> <h3 id="服务端"><a href="#服务端" class="header-anchor">#</a> 服务端</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">netstat</span> -s <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;SYNs to LISTEN&quot;</span> <span class="token comment"># 半连接队列满引发的重试次数,表示有多少个 tcp 连接因为半连接队列满而被丢弃</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>参数</th> <th>含义</th> <th>默认</th></tr></thead> <tbody><tr><td>/proc/sys/net/ipv4/tcp_max_syn_backlog</td> <td>半连接队列长度(需要同时增加 accept 才生效)</td> <td></td></tr> <tr><td>/proc/sys/net/ipv4/somaxconn</td> <td>accept 队列长度</td> <td>128</td></tr> <tr><td>backclog(web 服务器参数,即 listen 参数)</td> <td>listen( int sockfd, int backlog)</td> <td></td></tr> <tr><td>/proc/sys/net/ipv4/tcp_synack_retries</td> <td>syn + ack 重试次数</td> <td>5</td></tr></tbody></table> <p>accept 队列长度 min(somaxconn, backlog)</p> <p>开启 synccookies 可以在半连接队列满后不丢弃连接,可以不使用半连接队列建立连接.</p> <h5 id="半连接队列满了必须要丢弃吗-synccookies"><a href="#半连接队列满了必须要丢弃吗-synccookies" class="header-anchor">#</a> 半连接队列满了必须要丢弃吗? synccookies</h5> <p>服务器根据当前状态计算一个值,放在 syn + ack 的报文中,当客户端返回 ack 时取出该值验证,如果合法就可以成功建立连接.</p> <table><thead><tr><th>/proc/sys/net/ipv4/tcp_syncookies</th> <th>含义</th></tr></thead> <tbody><tr><td>0</td> <td>关闭该功能</td></tr> <tr><td>1</td> <td>仅当 syn 半连接队列满时再启用</td></tr> <tr><td>2</td> <td>无条件开启</td></tr></tbody></table> <h5 id="accept-队列满了必须丢弃吗"><a href="#accept-队列满了必须丢弃吗" class="header-anchor">#</a> accept 队列满了必须丢弃吗?</h5> <p>默认丢弃,但是可以向客户端发送 RST 报文</p> <table><thead><tr><th>/proc/sys/net/ipv4/tcp_abort_on_overflow</th> <th>含义</th></tr></thead> <tbody><tr><td>0</td> <td>如果 accept 队列满了,丢弃 ack</td></tr> <tr><td>1</td> <td>如果 accept 队列满了,发送 RST,废弃当前握手</td></tr></tbody></table> <h3 id="查看半连接和全连接长度"><a href="#查看半连接和全连接长度" class="header-anchor">#</a> 查看半连接和全连接长度</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ss -ltn <span class="token comment"># l 显示正在监听的 socket, n 不解析服务名称 t 只显示 tcp</span>
<span class="token function">date</span><span class="token punctuation">;</span><span class="token function">netstat</span> -s <span class="token operator">|</span> <span class="token function">grep</span> overflowed <span class="token comment"># 查看 accept 满丢弃的连接数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Recv-Q : 当前 accept 队列大小,当前完成三次握手,等待服务器 accept 的 tcp 连接</p> <p>Send-Q : accept 队列最大长度,</p> <h3 id="tcp-fast-open"><a href="#tcp-fast-open" class="header-anchor">#</a> TCP Fast Open</h3> <p>需要客户端和服务器同时开启才生效</p> <ol><li>客户端 syn 时请求 cookie</li> <li>服务器返回 syn + ack 时携带 cookie</li> <li>客户端保存 cookie</li></ol> <table><thead><tr><th>tcp_fastopen</th> <th>含义</th></tr></thead> <tbody><tr><td>0</td> <td>关闭</td></tr> <tr><td>1</td> <td>作为客户端使用该功能</td></tr> <tr><td>2</td> <td>作为服务器使用该功能</td></tr> <tr><td>3</td> <td>无论客户端和服务器都可以使用</td></tr></tbody></table> <h3 id="四次挥手"><a href="#四次挥手" class="header-anchor">#</a> 四次挥手</h3> <p>关闭连接方式有两种, RST 报文和 FIN 报文.如果进程异常退出,内核会发送 RST 报文来关闭.</p> <h4 id="close-shutdown"><a href="#close-shutdown" class="header-anchor">#</a> close &amp; shutdown</h4> <p>close : 调用 close 表示完全断开连接,不能发送也不能接收调用了 close 函数的一方叫孤儿连接, netstat -p 对应进程名是空的.</p> <p>shutdown : 可以关闭一个方向的连接.</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">shundown</span><span class="token punctuation">(</span><span class="token keyword">int</span> sock<span class="token punctuation">,</span> <span class="token keyword">int</span> howto<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>shut_rd(0)</td> <td>关闭读,如果接收缓存区已有数据,则丢弃,并且后续收到新数据会 ack,然后悄悄丢弃,对端不知道已丢弃</td></tr> <tr><td>shut_wr(1)</td> <td>关闭写,如果发送缓存区还有未发送数据,则被立即发出,并发送一个 FIN 报文给对方</td></tr> <tr><td>shut_rdwr(2)</td> <td>关闭读写,相对于 shut_rd 和 shut_wr 各执行一次</td></tr></tbody></table> <table><thead><tr><th>参数</th> <th>含义</th> <th>默认</th></tr></thead> <tbody><tr><td>tcp_orphan_reties</td> <td>FIN 报文重拾次数</td> <td>0(代表 8 次)</td></tr> <tr><td>tcp_max_orphan</td> <td>FIN_Wait_1 最大连接数,如果孤儿连接数量大于它,新的孤儿连接将不走四次挥手,直接 RST 强制关闭</td> <td></td></tr> <tr><td>tcp_fin_timeout</td> <td>控制 fin_wait_2 状态连接的持续时间</td> <td></td></tr> <tr><td>tcp_max_tw_buckets</td> <td>time_wait 数量超过该参数新关闭的连接不再经历 time_wait 直接关闭</td> <td></td></tr> <tr><td>tcp_tw_reuse</td> <td>建立新连接时复用 time_wait 状态的连接,该参数只使用客户端,服务端没有用</td> <td></td></tr> <tr><td>tcp_tw_recycle</td> <td></td> <td></td></tr></tbody></table> <h3 id="fin-无法发送"><a href="#fin-无法发送" class="header-anchor">#</a> fin 无法发送</h3> <ol><li>tcp 报文必须有序,如果发送缓存区有数据, FIN 不能提前发送</li> <li>tcp 有流量控制功能,如果接收方接收窗口为 0 发送方不能发送数据,攻击者通过接收窗口设置 0,会使 FIN 无法发送</li></ol> <ul><li>通常对 socket 执行 close 或 shutdown 会发送 fin 包,实际上只要应用退出(kill),都会发送 fin</li> <li>fin 是不再发送数据,shutdown 关闭读不回发送 fin,只有关闭写才会发送</li> <li>如果机器上有大量 fin-wait-2 需要检查有大量 close_wait 机器为什么不调用 close 关闭连接</li></ul> <p>全双工 : 发送数据的同时可以接收数据</p> <p>程序主动调用 close 如果 socket 接受缓存区有数据,会发送 RST,如果发送缓存区有数据会等发送完,发送 Fin.</p> <h2 id="time-wait-2"><a href="#time-wait-2" class="header-anchor">#</a> time_wait</h2> <ol><li>防止收到历史数据,导致数据错乱,time_wait 足以让两个方向的数据丢弃,使原来连接的数据包在网络中消失.再出现的数据包一定是新建立的连接产生的</li> <li>保证连接正常关闭 : 等待足够时间却确保最后的 ack 被对方收到,使其正常关闭</li></ol> <h2 id="_0-0-0-0"><a href="#_0-0-0-0" class="header-anchor">#</a> 0.0.0.0</h2> <p>表示本机上所有 ipv4 地址,即所有网卡地址.</p> <p>ping 127.0.0.1 和本机 ip 都是走回环网卡,将数据插入一个所有网卡共用的链表,产生软中断通知 ksofttirqd 进行收数据.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">8/24/2021, 4:52:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/m/设计模式/注册中心.html" class="prev">
        注册中心
      </a></span> <span class="next"><a href="/m/设计模式/k8s.html">
        k8s
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/m/assets/js/app.71fdaff2.js" defer></script><script src="/m/assets/js/2.351ead77.js" defer></script><script src="/m/assets/js/29.f40ac6f5.js" defer></script>
  </body>
</html>
