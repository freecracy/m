(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{711:function(t,a,r){"use strict";r.r(a);var s=r(20),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"被遗忘的logrotate"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#被遗忘的logrotate"}},[t._v("#")]),t._v(" 被遗忘的logrotate")]),t._v(" "),r("h2",{attrs:{id:"用途"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#用途"}},[t._v("#")]),t._v(" 用途")]),t._v(" "),r("p",[t._v("logrotate用来切分日志,软件开发过程中常常要记录日志,流水的日志一般以天为单位切分,最常见的做法是在框架中写日志时根据时间写入不同文件.")]),t._v(" "),r("h2",{attrs:{id:"配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),r("p",[t._v("logrotate是基于cron来运行的,其脚本是 "),r("strong",[t._v("/etc/cron.daily/logrotate")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws2.sinaimg.cn/large/006tKfTcly1g0waj1brwsj318a0boae8.jpg",alt:"image-20190309093422273"}})]),t._v(" "),r("p",[t._v("实际运行时logrotate会调用配置文件 "),r("strong",[t._v("/etc/logrotate.conf")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006tKfTcly1g0wak2atc4j30u00x87k7.jpg",alt:"image-20190309093523349"}})]),t._v(" "),r("p",[t._v("这里的设置时logrotate的缺省值,我们也可以在放 "),r("strong",[t._v("/etc/logrotate.d")]),t._v(" 置缺省配置文件来覆盖缺省值.")]),t._v(" "),r("p",[t._v("如果等不及cron可以用以下命令执行")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://ws4.sinaimg.cn/large/006tKfTcly1g0waoes51yj317o0220td.jpg",alt:"image-20190309093933825"}})]),t._v(" "),r("h3",{attrs:{id:"sharedscripts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sharedscripts"}},[t._v("#")]),t._v(" sharedscripts")]),t._v(" "),r("p",[t._v("所有日志文件都轮询完后执行一次脚本,如果没有配置,每个日志文件轮完都会执行一次脚本.")]),t._v(" "),r("h2",{attrs:{id:"rotate-maxage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rotate-maxage"}},[t._v("#")]),t._v(" rotate && maxage")]),t._v(" "),r("p",[t._v("rotate以个数为单位保留多少日志文件,maxage以天数为单位保留日志文件.")]),t._v(" "),r("h2",{attrs:{id:"执行时间"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#执行时间"}},[t._v("#")]),t._v(" 执行时间")])])}),[],!1,null,null,null);a.default=e.exports}}]);