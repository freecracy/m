(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{726:function(s,t,a){"use strict";a.r(t);var n=a(20),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),a("h3",{attrs:{id:"命令合集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令合集"}},[s._v("#")]),s._v(" 命令合集")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统配置")]),s._v("\nhostnamectl set-hostname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改主机名")]),s._v("\njournalctl "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看systemdctl日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统指标")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" @@transaction_isolation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# global 全局 session 会话")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" global transaction isolation lavel "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" uncommited \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看最大连接数 max_used_connections / max_connections * 100% 一般要求超过10%")]),s._v("\nshow variables like "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%max_connections%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nshow variables like "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%max_user_connections%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nshow engines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有存储引擎")]),s._v("\nshow variables like "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%storage_engine%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看默认存储引擎")]),s._v("\nshow table status like "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"table_name"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看表存储引擎")]),s._v("\nanalyze table tablename  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重建索引基数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"listen"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# overflow一直增加accept队列太小,连接等待处理时间过长")]),s._v("\nss —lnt      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看accept队列大小")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 bash 内置命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 区分外部命令和内置命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取内置命令帮助,不适用于外部命令")]),s._v("\nman、info    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# info 可以更完整的帮助")]),s._v("\ngroupadd、groupdel、groupmod "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 组操作")]),s._v("\nuseradd、userdel、usermod、id         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户操作,id 判断用户是否存在")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改密码")]),s._v("\nwho、whoami\npaste、join  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并文件")]),s._v("\nlscpu "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 cpu 核数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/cpuinfo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看每个 cpu 核信息")]),s._v("\n\n/etc/group                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 账户信息")]),s._v("\n/etc/gshadow                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安全组账户信息")]),s._v("\n/etc/login.defs             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码套件")]),s._v("\n/etc/passwd                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户和组信息")]),s._v("\nperf "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" -s "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("comm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前系统运行占比")]),s._v("\nperf record "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录采样信息")]),s._v("\nperf report -s "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("comm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^tcp/ {++S["),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NF")]),s._v("]} END {for (i in S) print i, s[i]}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 统计 tcp 各种状态链接的数量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.txt"')]),s._v(" -o -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.pdf"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -print "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找 pdf 和txt 文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -regex "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".*(.txt|.pdf)$ "')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找 pdf 和txt 文件,-iregex 忽略大小写的正则")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.txt"')]),s._v(" -print "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 否定查找")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -maxdepth "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -type f "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前目录下文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -atime "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" -type f -rint "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7 天被访问过的文件,atime 访问时间,单位是天,分钟则是 amin,mtime 修改时间,ctime 创建时间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -size +2k\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -perm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -user where -print\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.swp"')]),s._v(" --delete\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" -exed "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对于每一个文件{}都会替换成相应的文件名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -mtime +10 -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".txt"')]),s._v(" -exec "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" OLD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux --sort -pcpu "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据 cpu 使用率升序排序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux --sort -pmem "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据 内存使用率升序排序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux --sort -pcpu,+pmem "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -L pid "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 特定进程的线程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -axjf "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 树型显示进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux --sort -pmem,-pcpu"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每秒刷新一次")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1 d'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除行首")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" –n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'n p'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" –c "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取长度, n 行号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("shift")]),s._v(" + t "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu 使用时间排序")]),s._v("\nperf "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" -p pid "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采样")]),s._v("\nopenssl rand -base64 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成随机密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TZ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTC-8 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# utc 时间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" domain.com "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DNS 查询命令")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br")])]),a("h3",{attrs:{id:"mysql主从一致性校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql主从一致性校验"}},[s._v("#")]),s._v(" mysql主从一致性校验")]),s._v(" "),a("p",[s._v("checksum、mysqldiff、pt-table-checksum")]),s._v(" "),a("h2",{attrs:{id:"密码生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密码生命周期"}},[s._v("#")]),s._v(" 密码生命周期")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第一种方法")]),s._v("\nchage -M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" user \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第二种方法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/login.defs")]),s._v("\nPASS_MAX_DAYS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" \nPASS_MIN_DAYS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nPASS_WARN_AGE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"sudo-命令发送邮件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sudo-命令发送邮件"}},[s._v("#")]),s._v(" SUDO 命令发送邮件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/sudoers")]),s._v("\nmail_always on\nmailto email@example.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"使文件或目录不可更改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使文件或目录不可更改"}},[s._v("#")]),s._v(" 使文件或目录不可更改")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("chattr +i /user/bin "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 即使 root 用户也不可以更改")]),s._v("\nchattr -i /user/bin "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 去除不可修改属性")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"cpu利用率-平均负载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpu利用率-平均负载"}},[s._v("#")]),s._v(" cpu利用率 & 平均负载")]),s._v(" "),a("p",[s._v("cpu利用率 us (>50% 优化) + sy (us + sy > 80% 优化),如果cpu利用率不高而平均负载高常见于io密集型应用,平均负载就是R状态和 D 状态的和,产生 D 的原因一般是因为在等待 i/o.")]),s._v(" "),a("h2",{attrs:{id:"优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[s._v("#")]),s._v(" 优化")]),s._v(" "),a("p",[s._v("ps、top、iostat、vmstat、free、pidstat、ss、netstat")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^tcp/ {++s["),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NF")]),s._v("]} END {for (a in s) print a,s[a]}'")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前网络连接数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" auo %mem,pid,euser,cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -nr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -10 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内存使用前 10 进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aeo pcpu,user,pid,cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -nr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -10 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu使用前 10 进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -type f -print0 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" -0 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("du")]),s._v(" -h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -rh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 磁盘占用 top10 文件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"搜索"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[s._v("#")]),s._v(" 搜索")]),s._v(" "),a("p",[s._v("grep、ack、ag、sift(go实现grep增强)")]),s._v(" "),a("h2",{attrs:{id:"cpu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpu"}},[s._v("#")]),s._v(" cpu")]),s._v(" "),a("p",[s._v("三级缓存、乱序执行(提前执行不依赖前面指令结果的指令)、分支预判(乱序执行遇到分支选择大概率执行的分支)")]),s._v(" "),a("h2",{attrs:{id:"cut"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cut"}},[s._v("#")]),s._v(" cut")]),s._v(" "),a("p",[s._v("从一个字符串中以字节、字符、字段(分隔符)截取一部分出来.不支持指定多个字符做分隔符,多格空格会被当作多个字段分隔符,使用命令前通过 tr 去除空格.")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("f")]),s._v(" "),a("td",[s._v("提取指定字段,逗号或连字符,可同时使用")])]),s._v(" "),a("tr",[a("td",[s._v("d")]),s._v(" "),a("td",[s._v("指定分隔符,默认 tab 分隔符")])]),s._v(" "),a("tr",[a("td",[s._v("b")]),s._v(" "),a("td",[s._v("提取指定字节,逗号或连字符,可同时使用")])]),s._v(" "),a("tr",[a("td",[s._v("c")]),s._v(" "),a("td",[s._v("提取指定字符,逗号或连字符,可同时使用")])]),s._v(" "),a("tr",[a("td",[s._v("complement")]),s._v(" "),a("td",[s._v("反选")])]),s._v(" "),a("tr",[a("td",[s._v("output-delimiter")]),s._v(" "),a("td",[s._v("修改输出时使用的分隔符,默认和输入分隔符一样")])]),s._v(" "),a("tr",[a("td",[s._v("only-delimited")]),s._v(" "),a("td",[s._v("不输出不包含分隔符的列")])])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -cn- "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第 n 个字符到最后一个字符")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -c-n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第 1 个字符到第 n 个字符")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" ssh")]),s._v(" "),a("h3",{attrs:{id:"本地端口转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地端口转发"}},[s._v("#")]),s._v(" 本地端口转发")]),s._v(" "),a("h3",{attrs:{id:"远程端口转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程端口转发"}},[s._v("#")]),s._v(" 远程端口转发")]),s._v(" "),a("h2",{attrs:{id:"nc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nc"}},[s._v("#")]),s._v(" nc")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 反弹 shell")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l -vv -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" -e /bin/bash "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 机器上开放端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" port "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端远程连接, -k 客户端关闭后服务器继续监听")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 传输文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听端口,重定向到文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 非加密传输文件,反向箭头,传输完后可以 md5 校验")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xfvz - "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 传输目录,服务端")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cfz - "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" port "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 传输目录,客户端")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网路连同性检测")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -vvv baidu.com "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -vzww "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" port1-port2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 扫描主机端口开放情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 防火墙穿透")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -A -t ip1 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -A -t ip2 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -A ip3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 ip2 访问 ip3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -oProxyCommand "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh host1 nc host2 port"')]),s._v(" host2\n\nncat -lkp port --sh-exec "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo -ne \"HTTP1.0 200 OK"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" The date is\";date;'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时间服务器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"tcpdump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcpdump"}},[s._v("#")]),s._v(" tcpdump")]),s._v(" "),a("h2",{attrs:{id:"远程日志监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程日志监控"}},[s._v("#")]),s._v(" 远程日志监控")]),s._v(" "),a("h3",{attrs:{id:"方法1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法1"}},[s._v("#")]),s._v(" 方法1")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f log.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8899")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"方法2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法2"}},[s._v("#")]),s._v(" 方法2")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HTTP/1.1 200 OK"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Access-Control-Allow-Origin: *"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Content-type: text/event-stream"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f ./iam.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^/data: /;s/$/"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("n/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"查看系统版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看系统版本"}},[s._v("#")]),s._v(" 查看系统版本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /proc/version\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -a\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/issue\nlsb_release -a\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/lsb-release\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"查找-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找-nginx"}},[s._v("#")]),s._v(" 查找 nginx")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\nll /proc/pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("rep exe\nnginx -t\nnginx -V\nphp -i "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# php 配置信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"nc-传输文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nc-传输文件"}},[s._v("#")]),s._v(" nc 传输文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" -l port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"tcp-抓包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp-抓包"}},[s._v("#")]),s._v(" tcp 抓包")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("tcpdump -i any port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4063")]),s._v("  -s "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -X -nn -q -tttt -w  a.pcap\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"systemd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#systemd"}},[s._v("#")]),s._v(" systemd")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务")]),s._v("\nsystemctl list-units --all --type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\nsystemctl start firewalld\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" firewalld\nsystemctl disable firewalld\nsystemctl stop firewalld\nsystemctl status firewalld\nsystemctl restart firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口")]),s._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --list-ports "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有开放的端口")]),s._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# permanent 永久生效,没有此参数重启失效")]),s._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --query-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否开放")]),s._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --remove-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除端口")]),s._v("\nfirewall-cmd --reload\n\nfirewall-cmd --permanent --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("trusted --change-interface"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("docker0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker 内访问外部网络,许重启 firewalld 和docker")]),s._v("\nfirewall-cmd --get-zone-of-interface"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("docker0\nfirewall-cmd --get-active-zones\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"ip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ip"}},[s._v("#")]),s._v(" ip")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip addr show 简写, addr 是 address 简写,等同于 a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" addr "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" dev eth0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 ip , ifconfig ech0 add ip")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" a del "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" dev eth0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 ip , ifconfig eth0 del ip")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" eth0 up "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifup eth0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" eth0 up "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用或禁用网络")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"用户操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户操作"}},[s._v("#")]),s._v(" 用户操作")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" username\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" username\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root\nvisudo  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" NOPASSWD:ALL\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);